# 코드에서 나는 악취

## 리팩토링은 언제할까?

리팩토링의 방법에 대해선 자세하게 설명헤주지만, 언제 해야할지에 대해서는 구체적으로 말하기 어렵다. 때문에 파울러는 리팩토링을 진행했던 것 들의 패턴을 이야기 해준다.

## 이상한 이름

코드를 명료하게 표현하는 데 가장 중요한 요소는 바로 이름이다. 그래서 함수나 변수, 클래스의 이름을 보고 코드의 역할을 유추 할 수 있게 만들어야한다. 리팩토링을 하면서도 가장 많이 사용하는게 이름바꾸기 라고 한다.

이름만 잘 지어도 문맥을 이해하는데 큰 도움을 준다.

## 중복 코드

똑같은 코드 구조가 여러곳에서 사용된다면, 하나로 통합하며 사용한다. 리액트에서는 커스텀훅처럼 함수를 추출하여 동일한 훅을 호출하게 한다던지, 비슷하지만 완전 동일 하지는 않은 함수라면 문장 슬라이스 기법 등으로 중복 코드를 제거해 준다.

## 긴 함수

함수는 길 수록 이해하기 어렵다. 길 수록 하는 일이 많고 그러다 보면 이름도 이상해진다. 때문에 긴 함수는 쪼개야 한다. 함수를 역할에 따라 쪼개고 의도가 들어나는 이름을 지어준다. 핵심은 코드가 얼마나 긴가가 아니라 함수의 목적과 그 구현의 괴리 이다. 함수가 뭘 하는지 왜 이렇게 하는지 잘 설명하기 힘들면 함수로 빼는게 좋다. 쉽게 말하면 셜명할 필요가 있으면 함수로 빼는 게 좋다.

## 긴 매개변수

매개변수가 많아지면 그것도 그것대로 이해하기 어려워진다. 때문에 매개변수를 객체로 만들어서 넘겨주는 것도 좋은 방법이다.

## 전역 데이터

전역 데이터는 코드 어디서든지 접근할 수 있어서 조심하지 않으면 에러의 주범이 된다. 때문에 변수를 캡슐화하여 다른 곳에서 사용하지 못하도록 스코프를 지켜준다.

## 가변 데이터

데이터의 변경이 버그로 이어지는 경우가 있다. js에서는 var나 let을 이용하면 변수 재할당이 가능한데, 이런 경우에 다른 코드가 해당 값을 사용하고 있는 터에 데이터를 변경하게 되면 변수를 쓰고 있던 곳에서 에러가 나게된다. 때문에 데이터를 변경하지 않고, 변경하게 되면 데이터의 복사본을 이용해야한다.

## 뒤엉킨 변경/ 산탄총 수술

클래스에서 맥락적으로 흐르는 코드들은 뭉치고, 다른 맥락의 코드는 구분해 놓는 것이 클래스의 역할을 이해하는데 도움이 된다. 때문에 한 클래스에서 다양한 맥락이 있으면 함수를 쪼개고, 여러 클래스가 하나의 기능 때문에 변경이 된다면, 비슷한 맥락의 기능을 하나로 뭉쳐놓는 것이 좋다.

## 데이터

데이터는 여러 군대에서 사용되기 마련이다. 그렇게 돌아다니는 데이터들은 정리해서 하나의 클래스로 만들어두는 것이 관리하기 용이하다.

## 스위치문, 반복문

스위치문은 클래스의 다형성으로, 반복문은 순환함수(map,filter)등으로 변경하는 것이 더 좋다.

## 마무리

아무래도 클래스를 이용한 코딩에 적용되는 부분이 많다. 그러나 가변데이터 혹은 긴 함수 등은 코딩을 해오면서 많이 느껴본 부분이라 점점 더 공감이 되고 추상적으로 느껴지던 리팩터링의 필요성이 점점 구체적으로 느껴지는 것 같다.
