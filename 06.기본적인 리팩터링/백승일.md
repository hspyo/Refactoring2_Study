## 함수 추출하기

함수는 하나의 역할만을 하는 것이 좋다. 하는 일이 많아 지면 함수명으로 뭐하는 앤지 알기 어려워지기 때문이다. 때문에 함수는 짧고 간결하게 작성한다.

예를 들어, 색 반전을 이용한 하이라이트를 입히는 함수의 경우

```
function highlight (text){
  return reverse(text);
}
```

이렇게 짧고 간결하게 표현 될 수 있다. 그냥 reverse()를 때려도 되지만, reverse라는 함수명이 하이라이트 역할을 하는 함수라는 목적이랑 매칭이 잘 안되지 않는가.
그만큼 구현과 표현의 사이가 멀다고 볼 수 있다. 그렇기에 함수명은 함수의 목적이 잘 들어나게 지어야한다.

이런 이유로 여러 기능을 하는 함수는 내부의 기능을 쪼개서 구현하는 것이 가독성이 좋고, 내부 기능을 쪼개서 구현하는 리펙터링을 함수 추출하기 라고 한다.

이때 주의 할 점은 외부 함수의 렉시컬 환경에 있는 변수 즉 지역변수를 건드는 경우이다. 이런 경우에 건드는 변수는 매개변수로 받아서 처리하고 리턴하여 새로운 값을 가진 변수를 가지고 작업한다.

또한 여러 변수를 건드리게 된다면, 각각의 값에 기능을 함수로 만들 수 있다.

## 함수 인라인하기

함수를 추출해 놓고 보니 함수 본문이 충분히 함수의 역할을 표현하고 있을 수 있다. 이런 경우, 다시 함수를 인라인 해준다. 롤백

## 변수 추출하기

함수 내부의 로직이, 정확히 말하면 계산식이 기일어 질 수 있다.

```
  function getPrice(amount){
    return amount + amount*0.1 + Math.min(amount*0.3,100)..
  }
```

이렇게 길어지는 경우에 각각의 값을 하나의 변수로 추출해 줄 수 있다.

```
  function getPrice(amount){
    const tex = amount * 0.1;
    const fee = Math.min(amount * 0.3, 100);
    ...

    return tex + fee + amount + ...
  }
```

가독성이 훨신 좋아진다.

## 변수 인라인하기

함수 인라인 하기 처럼, 이걸 구지 라는 느낌은 다시 인라인으로 바꿔준다.

## 함수 선언 바꾸기

쉽게 말하면 함수 명 바꾸기 이다. 함수이름이 함수의 역할을 제대로 표현해주지 못한다면, 여러곳에서 쓰이더라도 과감히 바꿔준다.
이는 함수의 매개변수 또한 같다.

## 변수 캡슐화

변수가 불변성을 가지게 캡슐화 하게 되면, 값이 변경될 일이 없기 때문에 리펙토링하기가 쉬워진다.

## 매개변수 객체화하기

함수가 많은 변수를 받게되면 변수의 역할이 불명확해 질 수 있다. 때문에 이를 객체로 만들어서 무엇인지 명확히 해줄 수 있다.

## 함수를 클래스로 묶기

공통적인 데이터를 가지고 이용되는 함수들을 하나의 클래스로 만들면 관리하기 용이하다. 특정한 값을 가지고 움직인다면 constructor에 값으로 대입시켜서 쭉 사용하면 되고, 맥락이 같은 함수들이라면 static 매소드로 만들어서 묶어준다.

나는 보통 REST API작성할 때 이걸 이용하는 편이다.

## 여러 함수를 변환 함수로 묶기

같은 데이터를 사용하는 함수들은 결과를 리턴하는 코드를 중복해서 사용하는 경우가 많다. 때문에 이런 중복을 줄이기 위해서 여러 함수를 하나의 함수로 묶기도 한다.

## 단계 쪼개기

서로 다른 데이터를 한번에 다루는 함수가 있다면 각각을 분리해서 구현한다. 이를 분리하는 간편한 방법은 기능을 구분 동작으로 쪼개는 것이다.
